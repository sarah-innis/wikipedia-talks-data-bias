## A2 : Bias in Data
Sarah Innis October 19, 2025

### Goal of the Project
The goal of this assignment is to investigate two research questions regarding potential sources of bias in the Wikipedia Talk Corpus and to reflect on potential implications of Perspective API.  

### Dataset Description - Wikimedia REST API
Data for this analysis is sourced from the Wikipedia Talk Corpus (Terms and Conditions: https://foundation.wikimedia.org/wiki/Policy:Terms_of_Use). The license on is a CC0 license (https://wiki.creativecommons.org/wiki/CC0). 

This analysis uses two datasets from the Wikipedia talk Corpus (https://meta.wikimedia.org/wiki/Research:Detox/Data_Release):
1. Wikipedia Talk Labels: Personal Attacks: 100k labeled comments from English Wikipedia labeled by 10 annotators from Crowdflower on whether they contain a personall attack
2. Wikipedia Talk Labels: Personal Attacks: 100k labeled comments from English Wikipedia labeled by 10 annotators from Crowdflower on how toxic the comment is perceived to be

Data citations and DOIs:
Wulczyn, Ellery; Thain, Nithum; Dixon, Lucas (2017). Wikipedia Talk Labels: Personal Attacks. figshare. Dataset. https://doi.org/10.6084/m9.figshare.4054689.v6
Thain, Nithum; Dixon, Lucas; Wulczyn, Ellery (2017). Wikipedia Talk Labels: Toxicity. figshare. Dataset. https://doi.org/10.6084/m9.figshare.4563973.v2
Wulczyn, Ellery; Thain, Nithum; Dixon, Lucas (2017). Wikipedia Talk Corpus. figshare. Dataset. https://doi.org/10.6084/m9.figshare.4264973.v3

### Gathering the Data and Processing
File hcds-a2-data-bias.ipynb gives the code for CSV files from Figshare are loaded and processed. The raw data download from Figshare is saved in CSV format in this repository.

These are the schema for the raw data files as written by the Wikimedia Foundation:
"**Schema for attack_annotations.tsv**
Personal attack labels from crowd-workers for each comment in attack_annotated_comments.tsv. It can be joined with attack_annotated_comments.tsv on rev_id.

rev_id: MediaWiki revision id of the edit that added the comment to a talk page (i.e. discussion).
worker_id: Anonymized crowd-worker id.
quoting_attack: Indicator for whether the worker thought the comment is quoting or reporting a personal attack that originated in a different comment..
recipient_attack: Indicator for whether the worker thought the comment contains a personal attack directed at the recipient of the comment.
third_party_attack: Indicator for whether the worker thought the comment contains a personal attack directed at a third party.
other_attack: Indicator for whether the worker thought the comment contains a personal attack but is not quoting attack, a recipient attack or third party attack.
attack: Indicator for whether the worker thought the comment contains any form of personal attack. The exact question we posed can be found . The annotation takes on value 0 if the worker selected the option "This is not an attack or harassment" and value 1 otherwise.

**Schema for toxicity_annotations.tsv**
Toxicity labels from several crowd-workers for each comment in toxicity_annotated_comments.tsv. It can be joined with toxicity_annotated_comments.tsv on rev_id.

rev_id: MediaWiki revision id of the edit that added the comment to a talk page (i.e. discussion).
worker_id: Anonymized crowd-worker id.
toxicity_score: Categorical variable ranging from very toxic (-2), to neutral (0), to very healthy (2).
toxicity: Indicator variable for whether the worker thought the comment is toxic. The annotation takes on the value 1 if the worker considered the comment toxic (i.e worker gave a toxicity_score less than 0) and value 0 if the worker considered the comment neutral or healthy (i.e worker gave a toxicity_score greater or equal to 0). Takes on values in {0, 1}.

**Schema for {attack/toxicity}_annotated_comments.tsv**
The comment text and metadata for comments with attack/aggression/toxicity labels generated by crowd-workers. The actual labels are in the corresponding {attack/aggression/toxicity}_annotations.tsv since each comment was labeled multiple times.

rev_id: MediaWiki revision id of the edit that added the comment to a talk page (i.e. discussion).
comment: Comment text. Consists of the concatenation of content added during a revision/edit of a talk page. MediaWiki markup and HTML have been stripped out. To simplify tsv parsing, \n has been mapped to NEWLINE_TOKEN, \t has been mapped to TAB_TOKEN and " has been mapped to `.
year: The year the comment was posted in.
logged_in: Indicator for whether the user who made the comment was logged in. Takes on values in {0, 1}.
ns: Namespace of the discussion page the comment was made in. Takes on values in {user, article}.
sample: Indicates whether the comment came via random sampling of all comments, or whether it came from random sampling of the 5 comments around a block event for violating WP:npa or WP:HA. Takes on values in {random, blocked}.
split: For model building in our paper we split comments into train, dev and test sets. Takes on values in {train, dev, test}.

**Schema for {attack/toxicity}_worker_demographics.tsv**
Demographic information about the crowdworkers. This information was obtained by an optional demographic survey administered after the labelling task. It is meant to be joined with {attack/aggression/toxicity}_annotations.tsv on worker_id. Some fields may be blank if left unanswered.

worker_id: Anonymized crowd-worker id.
gender: The gender of the crowd-worker. Takes a value in {'male', 'female', and 'other'}.
english_first_language: Does the crowd-worker describe English as their first language. Takes a value in {0, 1}.
age_group: The age group of the crowd-worker. Takes on values in {'Under 18', '18-30', '30-45', '45-60', 'Over 60'}.
education: The highest education level obtained by the crowd-worker. Takes on values in {'none', 'some', 'hs', 'bachelors', 'masters', 'doctorate', 'professional'}. Here 'none' means no schooling, some means 'some schooling', 'hs' means high school completion, and the remaining terms indicate completion of the corresponding degree type."

### Data for Analysis
File hcds-a2-data-bias.ipynb describes how the Figshare data was processed for analysis. Intermidate CSVs for plots are saved to the repository. .pngs for plot files have also been saved to this repository.